{% extends 'dashboard/base.html' %}

{% block content %}

<style>
    form {
        padding-top: 30px;
        padding-bottom: 30px;
    }
</style>
<style>
    .col-sm-6 {
        padding-top: 5px;
        padding-bottom: 5px;
    }
</style>

<form method="GET" action="{% url 'compute' %}">
    {% csrf_token %}
    <div class="container">
        <div class="row">
        <!-- If general form errors, display them with red banner -->
        {% if form.non_field_errors %}
            <div class="alert alert-danger">
                {{ form.non_field_errors }}
            </div>
        {% endif %}
        <!-- Display each field's label and the field itself -->
        {% for field in form  %}
          <div class="col-sm-6">
            <b>{{ field.label_tag }}</b> {{ field }}
          </div>
        {% endfor %}
        </div>
    <!-- Submit button, 'submit' used to check if form is submitted -->
    <input type="submit" name="Daily" value="Daily"/>
    <input type="submit" name="Monthly" value="Monthly"/>
    </div>
&nbsp;
</form>

<div id="container_data" align="center"></div>

&nbsp;

<div style="width: 65%;margin-left: 17%;margin-right: 10%;margin-top: 5px;margin-bottom: 40px;">
    {{ chart_df|safe }}
</div>


<script>
       Highcharts.chart('container_data', {{ leaderboard_data|safe }});
</script>

<script>
    // Sets up the DataTable
    $(document).ready(function () {
    $('.dataframe').DataTable( {
        deferRender:    true,
        scrollY:        '75vh',
        scrollX:        true,
        scroller:       true,
        scroller: {
            loadingIndicator: true
        },
        scrollCollapse: true,
        'autoWidth': false,
        'processing': true,
        'language': {
            'loadingRecords': '&nbsp;',
            'processing': 'Loading...'
        },
        dom: 'Bfrtip',
        buttons: [
            'copyHtml5',
            'csv'
        ],
        pageResize:     false, <!-- Disable page resizing - DO NOT CHANGE -->
        ordering:       true
    });
});

</script>


{% endblock content %}